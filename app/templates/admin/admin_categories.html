{% extends "base.html" %}

{% block content %}
    {% import 'macros/category_list.html' as category_list %}

    <h2 class="mt-3 mb-3">Category Management</h2>
    <a href="{{ url_for('admin.dashboard') }}">&larr; Admin Dashboard</a>
    <a href="{{ url_for('categories.admin_new') }}" class="btn btn-success mb-2">+ Add Category</a>
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Parent</th>
            </tr>
        </thead>
        <tbody>
            {# Render root categories (no parent), sorted by name #}
            {% for root in categories|selectattr('parent', 'none')|sort(attribute='name') %}
                {{ category_list.render_rows(root, categories) }}
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

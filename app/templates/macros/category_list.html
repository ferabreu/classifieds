{% macro render_category_rows(category, categories, level=0) %}
    <tr>
        <td>
            <span style="display: inline-block; width: {{ (level|int) * 16 }}px;"></span>
            <a href="{{ url_for('listings.category_filtered_listings', category_path=category.url_path) }}">{{ category.name }}</a>
        </td>
        <td>
            {{ category.parent.name if category.parent else '-' }}
        </td>
        <td>
            <a class="btn btn-warning btn-sm" href="{{ url_for('categories.admin_edit', category_id=category.id) }}">Edit</a>
        </td>
    </tr>
    {% for child in categories if child.parent_id == category.id %}
        {{ render_category_rows(child, categories, level + 1) }}
    {% endfor %}
{% endmacro %}

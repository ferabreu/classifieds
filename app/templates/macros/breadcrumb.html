{#
  Template written and annotated by GitHub Copilot at the request of Fernando "ferabreu" Mees Abreu.
  See LICENSE file in the project root for full license information.

  Breadcrumb macro.
  Renders a breadcrumb navigation bar for a given category (self-referring tree).
  Expects a category object with 'breadcrumb' property (list of categories from root to self).
  Usage: {{ macros.breadcrumb(category) }}
#}

{% macro breadcrumb(category) %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('listings.index') }}">Home</a></li>
            {% for cat in category.breadcrumb[:-1] %}
                <li class="breadcrumb-item">
                    <a href="{{ url_for('listings.category_filtered_listings', category_path=cat.url_path) }}">{{ cat.name }}</a>
                </li>
            {% endfor %}
            <li class="breadcrumb-item active" aria-current="page">
                <a href="{{ url_for('listings.category_filtered_listings', category_path=category.breadcrumb[-1].url_path) }}">{{ category.breadcrumb[-1].name }}</a>
            </li>
        </ol>
    </nav>
{% endmacro %}
